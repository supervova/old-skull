:root {

  /* font size for root */
  --fsr: 1rem;

  /* Body copy text font size */
  --fs: var(--fsr);

  /* Line-height as unitless ratio */
  --lhr: 1.5;

  /* Typographic scale ratio (Minor third) */
  --sr: 1.25;

  /* Calculated base line-height in absolute units */
  --line-height-base: calc(var(--fs) * var(--lhr));

  /* Rhythm unit */
  --rhythm-unit: var(--line-height-base);

  /* Font sizes */
  --font-size-xs:   calc(var(--fs) / var(--sr) / var(--sr));
  --font-size-sm:   calc(var(--fs) / var(--sr));
  --font-size-md:   var(--fs);
  --font-size-lg:   calc(var(--fs) * var(--sr));
  --font-size-xl:   calc(var(--fs) * var(--sr) * var(--sr));
  --font-size-2xl:  calc(var(--fs) * var(--sr) * var(--sr) * var(--sr));
  --font-size-3xl:  calc(var(--fs) * var(--sr) * var(--sr) * var(--sr) * var(--sr));

  /* Line-heights */
  --line-height-tight: 1.25;
  --line-height-normal: var(--lhr);
  --line-height-relaxed: 1.75;

  /* Spacing */
  --space-0: 0;
  --space-1: calc(0.25 * var(--rhythm-unit)); /* 0.25lh */
  --space-2: calc(0.5 * var(--rhythm-unit));  /* 0.5lh */
  --space-3: calc(0.75 * var(--rhythm-unit)); /* 0.75lh */
  --space-4: var(--rhythm-unit);              /* 1lh */
  --space-5: calc(1.5 * var(--rhythm-unit));  /* 1.5lh */
  --space-6: calc(2 * var(--rhythm-unit));    /* 2lh */
  --space-8: calc(3 * var(--rhythm-unit));    /* 3lh */
  --space-10: calc(4 * var(--rhythm-unit));   /* 4lh */
  --space-12: calc(5 * var(--rhythm-unit));   /* 5lh */
  --space-16: calc(6 * var(--rhythm-unit));   /* 6lh */

  --space-inline-xs: 0.25rem;
  --space-inline-sm: 0.5rem;
  --space-inline-md: 1rem;
  --space-inline-lg: 1.5rem;
  --space-inline-xl: 2rem;

  /* Typography */
  --type-body-size: var(--font-size-md);
  --type-body-line-height: var(--line-height-normal);

  --type-heading-1-size: var(--font-size-3xl);
  --type-heading-1-line-height: var(--line-height-tight);
  --type-heading-1-margin-top: var(--space-8);
  --type-heading-1-margin-bottom: var(--space-4);

  --type-heading-2-size: var(--font-size-2xl);
  --type-heading-2-line-height: var(--line-height-tight);
  --type-heading-2-margin-top: var(--space-6);
  --type-heading-2-margin-bottom: var(--space-3);

  --type-heading-3-size: var(--font-size-xl);
  --type-heading-3-line-height: var(--line-height-normal);
  --type-heading-3-margin-top: var(--space-5);
  --type-heading-3-margin-bottom: var(--space-2);

  /* Paragraph spacing */
  --prose-paragraph-margin: var(--space-4);
  --prose-list-margin: var(--space-4);
  --prose-list-item-margin: var(--space-2);

  /* Section spacing */
  --section-padding-block: var(--space-12);
  --section-gap: var(--space-8);
}

@media (--tablet) {
  :root {
    --fs: 1.125rem; /* 18px */
    --sr: 1.333; /* Perfect fourth */
  }
}

@media (--desktop) {
  :root {
    --fs: 1.25rem; /* 20px */
    --lhr: 1.6;
  }
}

@layer utils {

  /* Margin-top utilities */
  .mt-0 { margin-top: var(--space-0); }
  .mt-1 { margin-top: var(--space-1); }
  .mt-2 { margin-top: var(--space-2); }
  .mt-4 { margin-top: var(--space-4); }
  .mt-6 { margin-top: var(--space-6); }
  .mt-8 { margin-top: var(--space-8); }

  /* Margin-bottom utilities */
  .mb-0 { margin-bottom: var(--space-0); }
  .mb-2 { margin-bottom: var(--space-2); }
  .mb-4 { margin-bottom: var(--space-4); }
  .mb-6 { margin-bottom: var(--space-6); }

  /* Gap utilities */
  .gap-2 { gap: var(--space-2); }
  .gap-4 { gap: var(--space-4); }
  .gap-6 { gap: var(--space-6); }

  /* Font size utilities */
  .text-xs { font-size: var(--font-size-xs); }
  .text-sm { font-size: var(--font-size-sm); }
  .text-lg { font-size: var(--font-size-lg); }
  .text-xl { font-size: var(--font-size-xl); }
}

/* Using */
@layer base {
  body {
    font-size: var(--type-body-size);
    line-height: var(--type-body-line-height);
  }

  h1 {
    font-size: var(--type-heading-1-size);
    line-height: var(--type-heading-1-line-height);
    margin-top: var(--type-heading-1-margin-top);
    margin-bottom: var(--type-heading-1-margin-bottom);
  }

  h2 {
    font-size: var(--type-heading-2-size);
    line-height: var(--type-heading-2-line-height);
    margin-top: var(--type-heading-2-margin-top);
    margin-bottom: var(--type-heading-2-margin-bottom);
  }

  h3 {
    font-size: var(--type-heading-3-size);
    line-height: var(--type-heading-3-line-height);
    margin-top: var(--type-heading-3-margin-top);
    margin-bottom: var(--type-heading-3-margin-bottom);
  }

  p {
    margin-top: 0;
    margin-bottom: var(--prose-paragraph-margin);
  }

  ul, ol {
    margin-top: 0;
    margin-bottom: var(--prose-list-margin);
    padding-left: var(--space-inline-lg);
  }

  li + li {
    margin-top: var(--prose-list-item-margin);
  }
}
